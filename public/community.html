<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>K-D-A Launcher — Community</title>
  <link rel="icon" href="/assets/favicon.svg">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/community.css">
</head>
<body>

<!-- loading screen -->
<div id="loadingScreen" class="loading-screen" hidden>
  <div class="loading-content">
    <div class="loading-spinner"></div>
    <p>Loading community…</p>
  </div>
</div>

<header class="topbar">
  <div class="topbar__left">
    <div class="brand">
      <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true">
        <circle cx="12" cy="12" r="10" fill="currentColor" opacity="0.9"></circle>
        <circle cx="12" cy="12" r="4" fill="black" opacity="0.7"></circle>
      </svg>
      <span class="brand__text">K-D-A Launcher</span>
    </div>

    <nav class="nav">
      <button class="nav__link" data-route="store" onclick="window.location='/'">Underground</button>
      <button class="nav__link" data-route="library" onclick="window.location='/library'">Library</button>
      <button class="nav__link active" data-route="community" onclick="window.location='/community'">Community</button>
      <button class="nav__link trusted" data-route="trusted" onclick="window.location='/trusted'">Trusted ❤️</button>
    </nav>
  </div>

  <div class="topbar__right">
    <div class="search">
      <input id="threadSearch" type="search" placeholder="Search threads…">
    </div>
  <!-- mount point for auth UI (JS will inject everything here) -->
  <div id="auth-root"></div>
</header>

<!-- layout -->
<div class="layout">

  <aside class="sidebar">
    <div class="sidebar__section">
      <div class="sidebar__title">Categories</div>
      <ul class="sidebar__list">
        <li><button class="sidebar__item active" data-category="all">All</button></li>
        <li><button class="sidebar__item" data-category="games">Games</button></li>
        <li><button class="sidebar__item" data-category="tech">Tech</button></li>
        <li><button class="sidebar__item" data-category="mods">Mods</button></li>
        <li><button class="sidebar__item" data-category="offtopic">Off-topic</button></li>
      </ul>
    </div>

    <div class="sidebar__section">
      <div class="sidebar__title">Top Threads</div>
      <div id="topThreads" class="sidebar__games"></div>
    </div>

    <div class="sidebar__section">
      <div class="sidebar__title">Reputation (Games)</div>
      <div id="repBoard" class="rep-board"></div>
    </div>
  </aside>

    <main class="content">
    <section class="hero">
        <div class="hero__bg"></div>
        <div class="hero__content">
        <h1>Community Board</h1>
        <p>Discuss games, mods, fixes. Vote on threads and +rep/−rep games.</p>

    <div class="composer" id="composer">
      <div class="composer__header">
        <div class="composer__title">
          <h3>Create a Thread</h3>
          <p class="composer__subtitle">Share fixes, mods, questions, or rep a game.</p>
        </div>
        <button id="composerToggle" class="btn btn--primary" type="button" aria-expanded="false">
          Create Thread
        </button>
      </div>

      <form id="threadForm" class="composer__form" autocomplete="off">
        <div class="field">
          <label for="threadTitle">Thread title</label>
          <input type="text" id="threadTitle" placeholder="e.g., Online-Fix launcher won’t start on Windows 11" required>
        </div>

        <div class="composer__row">
          <div class="field">
            <label for="threadCategory">Category</label>
            <select id="threadCategory" required aria-label="Category">
              <option value="games">Games</option>
              <option value="tech">Tech</option>
              <option value="mods">Mods</option>
              <option value="offtopic">Off-topic</option>
            </select>
          </div>

          <div class="field">
            <label for="gameTitle">Game title (optional)</label>
            <input type="text" id="gameTitle" placeholder="Game title">
          </div>

          <div class="field">
            <label for="gameSource">Source (optional)</label>
            <input type="text" id="gameSource" placeholder="e.g., OnlineFix, FitGirl, Dodi">
          </div>
        </div>

        <div class="field">
          <label for="threadBody">Post</label>
          <textarea id="threadBody" rows="6" placeholder="Write your post…"></textarea>
          <div class="hint">Press <kbd>Ctrl</kbd>/<kbd>⌘</kbd> + <kbd>Enter</kbd> to publish</div>
        </div>

        <div class="composer__actions">
          <button type="button" class="btn btn--ghost" id="composerCancel">Cancel</button>
          <button type="submit" class="btn btn--primary">Publish</button>
        </div>
      </form>
    </div>

        <!-- Toolbar: filters + sort -->
        <div class="controls-inline">
            <div class="filters">
            <button id="filterToggle" class="filter-btn" type="button">Filters</button>
            <!-- add filter chips/inputs here if needed -->
            </div>

            <select id="sortSelect" class="select" aria-label="Sort threads">
            <option value="new">Newest</option>
            <option value="top">Top (votes)</option>
            <option value="hot">Hot (balanced)</option>
            </select>
        </div>
        </div>
    </section>

    <section class="community">
        <div class="thread-list" id="threadList"></div>
        <div id="emptyState" class="empty-state" hidden>No threads yet. Be the first to post.</div>
    </section>
    </main>
</div>

<script src="/js/auth.js"></script>
<script src="/js/community.js"></script>
</body>
</html>