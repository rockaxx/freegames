<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>K-D-A Launcher — Thread</title>

  <!-- Base styles + palette -->
  <link rel="icon" href="/assets/favicon.svg">
  <link rel="stylesheet" href="/css/styles.css">
  <!-- Optional general community styles (keep if you use the composer/list page too) -->
  <link rel="stylesheet" href="/css/community.css">
  <!-- NEW: detail-only stylesheet -->
  <link rel="stylesheet" href="/css/community_detail.css">
</head>
  <script>
    let warnTimer = null;

    window.showWarning = (msg) => {
      const box = document.getElementById('warnBox');

      box.textContent = msg;
      box.style.display = 'block';

      if (warnTimer) clearTimeout(warnTimer);

      warnTimer = setTimeout(() => {
        box.style.display = 'none';
        warnTimer = null;
      }, 3000);
    };
  </script>

<body>

<header class="topbar">
  <div class="topbar__left">
    <div class="brand" onclick="window.location='/'" role="button" aria-label="Go home">
      <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true">
        <circle cx="12" cy="12" r="10" fill="currentColor" opacity="0.9"></circle>
        <circle cx="12" cy="12" r="4" fill="black" opacity="0.7"></circle>
      </svg>
      <span class="brand__text">K-D-A Launcher</span>
    </div>
    <nav class="nav">
      <button class="nav__link" onclick="window.location='/'">Underground</button>
      <button class="nav__link" onclick="window.location='/library'">Library</button>
      <button class="nav__link active" onclick="window.location='/community'">Community</button>
      <button class="nav__link trusted" onclick="window.location='/trusted'">Trusted ❤️</button>
    </nav>
  </div>
  <!-- mount point for auth UI (JS will inject everything here) -->
  <div id="auth-root"></div>
</header>

<div class="layout">
  <aside class="sidebar">
    <div class="sidebar__section">
      <div class="sidebar__title">Navigation</div>
      <button class="sidebar__item" onclick="history.back()">← Back to list</button>
    </div>
  </aside>

  <main class="content">
    <article id="thread" class="thread-detail thread-shell">
      <!-- Votes column -->
      <div class="thread-detail__votes">
        <button id="voteUp" class="vote-btn" aria-label="+1">▲</button>
        <span id="voteScore" class="vote-score">0</span>
        <button id="voteDown" class="vote-btn" aria-label="-1">▼</button>
      </div>

      <!-- Main column -->
      <div class="thread-detail__main">
        <header class="thread-header">
          <h1 id="threadTitle"></h1>

          <div class="chips" id="threadMeta">
            <!-- Injected by JS: category, game, source, author, time -->
          </div>

          <div class="thread-toolbar">
            <button id="copyLink" class="btn btn--ghost sm" type="button">Copy link</button>
            <button id="goComments" class="btn sm" type="button">Comments</button>
          </div>
        </header>

        <!-- Reputation line (shown only if game_title exists) -->
        <div id="repWrap" class="rep-line" hidden>
          <div class="rep-pill" id="repPill">
            <span id="repGameTitle"></span>
            <strong id="repScore"></strong>
          </div>
          <div class="rep-actions">
            <button id="repUp" class="rep-btn rep-btn--up" type="button">+rep</button>
            <button id="repDown" class="rep-btn rep-btn--down" type="button">-rep</button>
          </div>
        </div>

        <!-- Body -->
        <div class="thread-body prose" id="threadBody"></div>

        <!-- Comments -->
        <section id="comments" class="comments-area">
          <div class="comments-area__head">
            <h2>Comments</h2>
            <div class="comments-count" id="commentsCount"></div>
          </div>

          <div id="commentsList" class="comments"></div>

          <form id="commentForm" class="comment-form" autocomplete="off">
            <input id="commentInput" type="text" placeholder="Write a comment…" aria-label="Comment">
            <button class="btn btn--primary" type="submit">Send</button>
          </form>
        </section>
      </div>
    </article>
  </main>
</div>
<div id="warnBox" style="
  position:fixed; top:20px; left:50%; transform:translateX(-50%);
  background:#a00; color:#fff; padding:10px 16px; border-radius:8px;
  font-weight:600; display:none; z-index:999999;
  box-shadow:0 4px 14px rgba(0,0,0,.4);
"></div>
<script src="/js/auth.js"></script>

<script src="/js/community_detail.js"></script>
</body>
</html>
