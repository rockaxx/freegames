<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GAME.IT</title>
  <link rel="icon" href="/assets/favicon.svg">
  <link rel="stylesheet" href="/css/styles.css">
  <script>
    function wllogout() {
      fetch("/api/whitelist/logout", {
        method: "POST",
        credentials: "include",
      })
        .then((r) => r.json())
        .then((data) => {
          if (data.ok) {
            window.location.reload();
          } else {
            alert("whitelist logout fail: " + (data.error || "unknown"));
          }
        })
        .catch((err) => {
          console.error("logout err:", err);
          alert("logout JS error");
        });
    }
  </script>
</head>
<body>
<!-- topbar -->
<header class="topbar">
  <div class="topbar__left">
    <div class="brand">
      <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true">
        <circle cx="12" cy="12" r="10" fill="currentColor" opacity="0.9"></circle>
        <circle cx="12" cy="12" r="4" fill="black" opacity="0.7"></circle>
      </svg>
      <span class="brand__text">GAME.IT</span>
    </div>

<!-- Mobile burger -->
        <button id="mobileMenuBtn" class="burger" aria-label="Open menu">
          <span></span><span></span><span></span>
        </button>

        <nav class="nav">
          <button
            class="nav__link active"
            data-route="store"
            onclick="window.location='/'"
          >
            Underground
          </button>
          <button
            class="nav__link"
            data-route="library"
            onclick="window.location='/library'"
          >
            Library
          </button>
          <button
            class="nav__link"
            data-route="community"
            onclick="window.location='/community'"
          >
            Community
          </button>
          <button
            class="nav__link trusted"
            data-route="trusted"
            onclick="window.location='/trusted'"
          >
            Trusted ❤️
          </button>
          <button class="nav__link" data-route="community" onclick="wllogout()">
            WL Logout
          </button>
        </nav>
      </div>

      <div class="topbar__right">
        <div class="search">
          <input id="searchInput" type="search" placeholder="Search games…" />
        </div>
        <!-- mount point for auth UI (JS will inject everything here) -->
        <div id="auth-root"></div>
      </div>
    </header>

    <!-- Backdrop for mobile drawer -->
    <div id="sidebarBackdrop" class="sidebar-backdrop" hidden></div>

    <!-- layout -->
    <div class="layout">
      <aside class="sidebar" id="mobileDrawer">
        <nav class="mnav" aria-label="Main">
          <div class="mnav__section">
            <div class="mnav__title">Menu</div>
            <a class="mnav__item" href="/">Games</a>
            <a class="mnav__item" href="/library">Library</a>
            <a class="mnav__item" href="/community">Community</a>
            <a class="mnav__item" href="/trusted">Trusted ❤️</a>
            <button id="mnav-logout" class="mnav__item mnav__btn" type="button">
              Whitelist logout
            </button>
          </div>
        </nav>
      </aside>

<!-- Trusted Downloads Layout -->
<div class="trusted-container">
  <section class="trusted-hero">
    <div class="trusted-hero__content">
      <h1>Trusted Downloads ❤️</h1>
      <p>Handpicked and verified software, cracked by trusted sources.</p>
      <div class="search" style="max-width: 500px; margin: 20px auto 0;">
        <input id="trustedSearch" type="search" placeholder="Search software...">
      </div>
    </div>
  </section>

  <section class="trusted-section">
    <div id="trustedGrid" class="trusted-grid"></div>
  </section>
</div>

<script src="/js/trusted.js"></script>
<script src="/js/app.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/mobile_menu.js"></script>
</body>
</html>